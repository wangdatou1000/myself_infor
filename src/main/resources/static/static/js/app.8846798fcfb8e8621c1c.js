webpackJsonp([1],{NHnr:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("7+uW"),i={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},staticRenderFns:[]};var l=e("VU/8")({name:"App"},i,!1,function(t){e("RbVK")},null,null).exports,n=e("mtWM"),o=e.n(n);Object.defineProperties(o.a,{$context:{get:()=>Object({NODE_ENV:"production"}).API_ROOT}});const r=o.a.create({baseURL:o.a.$context});r.interceptors.response.use(t=>t,t=>(t.response,Promise.reject(t)));var c=r,d={queryBlockedSubscriptions:t=>c.post("/dcpapi/BundlePackageManagement/v1/QueryBlockedSubscriptions",t),querySubscriptionTraffic:t=>c.post("/dcpapi/SubscriptionTraffic/v1/QuerySubscriptionTraffic",t),queryHistoryTraffic:t=>c.post("/dcpapi/HistoryTraffic/v1/QueryHistoryTraffic",t)},u={name:"simulation",data:()=>({textarea:"",id:"",time:"",count:0,flag:!0,bFlag:!0,turecount:0}),methods:{start(){this.id=this.$route.params.id,console.log("start"+this.id),this.bFlag=!1,this.time=setInterval(()=>{this.timeDown()},2e3)},getInfo(){console.log("1"+ ++this.count),this.loading=!0;var t="";d.querySubscriptionTraffic({id:this.id,type:2}).then(a=>{if(this.loading=!1,a.data&&0===a.data.code){var e=new Date;e.setTime(a.data.result.queryTime),t=e.toLocaleString()+"  达量断网状态:"+a.data.result.status+"  上行流量:"+this.calB2M(a.data.result.tx)+"M  下行流量:"+this.calB2M(a.data.result.rx)+"M  总流量:"+this.calB2M(a.data.result.total)+"M  \n",this.textarea+=t,console.log("2"+ ++this.turecount),this.flag=!0}}).catch(t=>{this.loading=!0})},timeDown(){this.flag&&(this.getInfo(),this.flag=!1)},calB2M:t=>t/1024/1024,stop(){this.bFlag=!0,clearInterval(this.time)}}},p={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-main",{staticClass:"main-style"},[e("el-row",[e("el-button",{staticClass:"space",attrs:{disabled:!t.bFlag},on:{click:t.start}},[t._v("启动")]),t._v(" "),e("el-row",[e("el-col",{attrs:{span:3}},[t._v("查询结果 ：")]),t._v(" "),e("el-col",{attrs:{span:19}},[e("el-input",{attrs:{type:"textarea",autosize:{minRows:10,maxRows:10}},model:{value:t.textarea,callback:function(a){t.textarea=a},expression:"textarea"}})],1)],1),t._v(" "),e("el-button",{staticClass:"space",attrs:{disabled:t.bFlag},on:{click:t.stop}},[t._v("停止")])],1)],1)},staticRenderFns:[]};var m=e("VU/8")(u,p,!1,function(t){e("qXPg")},"data-v-b6bdd980",null).exports,h={name:"analysis",data:()=>({textarea:"",id:"",startDate:"",endDate:"",time:[],exceedTraffic:"",bundleTraffic:"",delay:"",actualBlockTime:"",expectBlockTime:""}),methods:{start(){this.id=this.$route.params.id,this.startDate=this.formatTime(this.time[0]),this.endDate=this.formatTime(this.time[1]),this.queryHistoryTraffic()},formatTime(t,a){console.log(t);var e=new Date(t),s=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();return console.log("result:"+s),s},calB2M:t=>t/1024/1024,handleTime(t){var a=new Date;return a.setTime(t),a.toLocaleString()},queryHistoryTraffic(){this.loading=!0;var t="";d.queryHistoryTraffic({id:this.id,startDate:this.startDate,endDate:this.endDate,type:2}).then(a=>{if(this.loading=!1,a.data&&0===a.data.code){for(var e=a.data.result.trafficInfos,s=0;s<e.length;s++)t+=e[s].day+"  上行流量:"+this.calB2M(e[s].tx)+"M  下行流量:"+this.calB2M(e[s].rx)+"M  日总流量:"+this.calB2M(e[s].dailyTotal)+"M \n";this.textarea=t}}).catch(t=>{this.loading=!0})},blockDelay(){this.loading=!0,d.blockDelay({id:this.id,type:2}).then(t=>{if(this.loading=!1,t.data&&0===t.data.code){var a=t.data.result;this.exceedTraffic=this.calB2M(a.exceedTraffic),this.bundleTraffic=this.calB2M(a.bundleTraffic),this.delay=a.delay,this.actualBlockTime=this.handleTime(a.actualBlockTime),this.expectBlockTime=this.handleTime(a.expectBlockTime)}}).catch(t=>{this.loading=!0})}}},v={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-main",{staticClass:"main-style"},[e("el-row",[e("el-row",{staticClass:"space"},[e("span",{staticClass:"title"},[t._v("选择时间范围 ：")])]),t._v(" "),e("el-row",{staticClass:"space"},[e("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.time,callback:function(a){t.time=a},expression:"time"}}),t._v(" "),e("el-button",{staticClass:"space",on:{click:t.start}},[t._v("查询")])],1)],1),t._v(" "),e("el-row",[e("el-row",{staticClass:"space"},[e("span",{staticClass:"title"},[t._v("话单信息 ：")])]),t._v(" "),e("el-row",{staticClass:"space"},[e("el-col",{attrs:{span:4}},[t._v("详单 ：")]),t._v(" "),e("el-col",{attrs:{span:18}},[e("el-input",{attrs:{type:"textarea",autosize:{minRows:10,maxRows:10}},model:{value:t.textarea,callback:function(a){t.textarea=a},expression:"textarea"}})],1)],1)],1),t._v(" "),e("el-row",[e("el-row",{staticClass:"space"},[e("span",{staticClass:"title"},[t._v("话单时延分析 ：")]),t._v(" "),e("el-button",{staticClass:"space",on:{click:t.detail}},[t._v("开始")])],1),t._v(" "),e("el-row",{staticClass:"space"},[e("el-col",{attrs:{span:4}},[t._v("超出流量 ：")]),t._v(" "),e("el-col",{attrs:{span:18}},[t._v(t._s(t.exceedTraffic)+" M")])],1),t._v(" "),e("el-row",{staticClass:"space"},[e("el-col",{attrs:{span:4}},[t._v("断网阈值 ：")]),t._v(" "),e("el-col",{attrs:{span:18}},[t._v(t._s(t.bundleTraffic)+" M")])],1),t._v(" "),e("el-row",{staticClass:"space"},[e("el-col",{attrs:{span:4}},[t._v("延迟 ：")]),t._v(" "),e("el-col",{attrs:{span:18}},[t._v(t._s(t.delay)+" s")])],1),t._v(" "),e("el-row",{staticClass:"space"},[e("el-col",{attrs:{span:4}},[t._v("实际断网时间 ：")]),t._v(" "),e("el-col",{attrs:{span:18}},[t._v(t._s(t.actualBlockTime)+" s")])],1),t._v(" "),e("el-row",{staticClass:"space"},[e("el-col",{attrs:{span:4}},[t._v("预期断网时间 ：")]),t._v(" "),e("el-col",{attrs:{span:18}},[t._v(t._s(t.expectBlockTime)+" s")])],1)],1)],1)},staticRenderFns:[]};var f=e("VU/8")(h,v,!1,function(t){e("kU0I")},"data-v-5ea5ad06",null).exports,_={name:"demo",components:{simulation:m,analysis:f},mounted(){this.msisdn=this.options[0].label,console.log(this.msisdn),this.$router.push({name:"demo",params:{id:this.msisdn}}),this.queryBlockedSubscriptions()},data:()=>({imsi:"",msisdn:"",current:1,options:[{value:1,label:"861064999990026"}],info:[],status:"false",subscriptionDesr:"",subscriptionId:""}),methods:{onTabClick(t){void 0===t.name&&this.queryBlockedSubscriptions(),console.log(t.name);var a=this.msisdn;console.log("id:"+a),this.$router.push({name:t.name,params:{id:a}})},queryBlockedSubscriptions(){this.loading=!0,d.queryBlockedSubscriptions({type:2,id:"861064999990026"}).then(t=>{if(this.loading=!1,t.data&&0===t.data.code){var a=t.data.result.simInfo;this.imsi=a.imsi,this.msisdn=a.msisdn,this.status=a.status,this.subscriptionDesr=a.subscriptionDesr,this.subscriptionId=a.subscriptionId}}).catch(t=>{this.loading=!0})},getNewId(t){console.log(t),this.imsi=this.info[t].imsi,this.msisdn=this.info[t].msisdn,this.customerNo=this.info[t].customerNo}}},b={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-main",[e("el-card",{staticClass:"space"},[e("el-select",{attrs:{placeholder:"861064999990026"},on:{change:t.getNewId},model:{value:t.current,callback:function(a){t.current=a},expression:"current"}},t._l(t.options,function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),e("div",[e("el-tabs",{staticClass:"card",attrs:{type:"border-card"},on:{"tab-click":t.onTabClick}},[e("el-tab-pane",{attrs:{label:"基本信息"}},[e("el-row",{staticClass:"space"},[e("el-col",{attrs:{span:6}},[t._v("卡号")]),t._v(" "),e("el-col",{attrs:{span:12}},[t._v(t._s(t.msisdn))])],1),t._v(" "),e("el-row",{staticClass:"space"},[e("el-col",{attrs:{span:6}},[t._v("达量断网状态")]),t._v(" "),e("el-col",{attrs:{span:12}},[t._v(t._s(t.status))])],1),t._v(" "),e("el-row",{staticClass:"space"},[e("el-col",{attrs:{span:6}},[t._v("订购包描述")]),t._v(" "),e("el-col",{attrs:{span:12}},[t._v(t._s(t.subscriptionDesr))])],1),t._v(" "),e("el-row",{staticClass:"space"},[e("el-col",{attrs:{span:6}},[t._v("订购包id")]),t._v(" "),e("el-col",{attrs:{span:12}},[t._v(t._s(t.subscriptionId))])],1)],1),t._v(" "),e("el-tab-pane",{attrs:{name:"simulation",label:"实时状态查询"}},[e("simulation")],1),t._v(" "),e("el-tab-pane",{attrs:{name:"analysis",label:"断网指标分析"}},[e("analysis")],1)],1)],1)],1)},staticRenderFns:[]};var g=e("VU/8")(_,b,!1,function(t){e("qozV")},"data-v-47cf6308",null).exports,y=e("/ocq");s.default.use(y.a);var T=new y.a({routes:[{path:"/demo",name:"demo",component:g,children:[{path:"/demo/simulation",name:"simulation",component:m},{path:"/demo/analysis",name:"analysis",component:f}]}]}),x=e("zL8q"),w=e.n(x);e("tvR6");s.default.use(w.a),s.default.config.productionTip=!1,T.push({name:"demo"}),new s.default({el:"#app",router:T,components:{App:l},template:"<App/>"})},RbVK:function(t,a){},kU0I:function(t,a){},qXPg:function(t,a){},qozV:function(t,a){},tvR6:function(t,a){}},["NHnr"]);
//# sourceMappingURL=app.8846798fcfb8e8621c1c.js.map